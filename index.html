<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Entrenamiento de Daniel Ramírez</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-bg': '#0A0A0A',
                        'brand-surface': '#191919',
                        'brand-primary': '#DC2626', // Red-600
                        'brand-primary-darker': '#991B1B', // Red-800
                        'brand-text': '#F5F5F5',
                        'brand-text-muted': '#A3A3A3',
                    },
                    boxShadow: {
                        'glow': '0 0 15px rgba(220, 38, 38, 0.4), 0 0 5px rgba(220, 38, 38, 0.3)',
                    }
                }
            }
        }
    </script>
    <!-- Chosen Palette: Red & Black (Near-black BG, Dark Gray Surface, Intense Red Accent) -->
    <!-- Application Structure Plan: Retained the "Hyper Dark" SPA structure with a dashboard, tools, progress, routine, and fundamentals sections. This structure is robust and well-organized. -->
    <!-- Visualization & Content Choices: Color palette is red/black. All interactive elements (buttons, active states), borders, chart colors, and glow effects use the red theme for a consistent aesthetic. The critical bug in the routine navigation has been fixed to ensure full functionality. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0A0A0A;
            color: #F5F5F5;
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap');
        .page { display: none; }
        .page.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .nav-link.active {
            color: #DC2626;
            border-bottom-color: #DC2626;
            text-shadow: 0 0 8px rgba(220, 38, 38, 0.7);
        }
        .day-btn.active {
            background-color: #DC2626;
            color: #F5F5F5;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(220, 38, 38, 0.5);
        }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out; }
        .chart-container { position: relative; width: 100%; height: 300px; max-height: 350px; }

        .card-border-gradient {
            border: 1px solid transparent;
            background: linear-gradient(#191919, #191919) padding-box, linear-gradient(120deg, #991B1B, #EF4444) border-box;
        }
        .tool-card {
            background: radial-gradient(circle at top left, rgba(220, 38, 38, 0.1), transparent 40%), 
                        radial-gradient(circle at bottom right, rgba(153, 27, 27, 0.1), transparent 40%),
                        #191919;
        }
    </style>
</head>
<body class="bg-brand-bg">

    <div class="max-w-7xl mx-auto min-h-screen bg-brand-bg">
        <header class="bg-brand-surface/70 backdrop-blur-lg p-4 sm:p-6 border-b border-gray-800 sticky top-0 z-20">
             <div class="flex flex-col sm:flex-row justify-between items-center">
                <h1 class="text-2xl sm:text-3xl font-black text-white tracking-wider">Página de <span class="text-brand-primary">Daniel Ramírez</span></h1>
                <nav id="main-nav" class="flex flex-wrap justify-center gap-x-1 sm:gap-x-3 mt-4 sm:mt-0">
                    <a href="#" data-target="dashboard" class="nav-link active text-xs sm:text-sm font-medium border-b-2 border-transparent p-2 transition">PANEL</a>
                    <a href="#" data-target="tools" class="nav-link text-xs sm:text-sm font-medium border-b-2 border-transparent p-2 transition">HERRAMIENTAS</a>
                    <a href="#" data-target="progress" class="nav-link text-xs sm:text-sm font-medium border-b-2 border-transparent p-2 transition">PROGRESO</a>
                    <a href="#" data-target="routine" class="nav-link text-xs sm:text-sm font-medium border-b-2 border-transparent p-2 transition">RUTINA</a>
                    <a href="#" data-target="accessories" class="nav-link text-xs sm:text-sm font-medium border-b-2 border-transparent p-2 transition">ACCESORIOS</a>
                    <a href="#" data-target="nutrition" class="nav-link text-xs sm:text-sm font-medium border-b-2 border-transparent p-2 transition">NUTRICIÓN</a>
                    <a href="#" data-target="fundamentals" class="nav-link text-xs sm:text-sm font-medium border-b-2 border-transparent p-2 transition">FUNDAMENTOS</a>
                </nav>
            </div>
        </header>

        <main id="content-area" class="p-4 sm:p-6 lg:p-8">
            <section id="dashboard" class="page active">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2 bg-brand-surface p-6 rounded-lg shadow-lg card-border-gradient">
                        <h3 class="text-2xl font-bold mb-4 text-white">Volumen Semanal <span class="text-brand-text-muted text-lg font-medium">(Series Efectivas)</span></h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                            <div class="bg-gray-900/50 p-4 rounded-lg text-center"><h4 class="font-semibold text-brand-primary">Pecho</h4><p class="text-4xl font-black">17</p></div>
                            <div class="bg-gray-900/50 p-4 rounded-lg text-center"><h4 class="font-semibold text-brand-primary">Espalda</h4><p class="text-4xl font-black">20</p></div>
                            <div class="bg-gray-900/50 p-4 rounded-lg text-center"><h4 class="font-semibold text-brand-primary">Hombros</h4><p class="text-4xl font-black">24</p></div>
                            <div class="bg-gray-900/50 p-4 rounded-lg text-center"><h4 class="font-semibold text-brand-primary">Piernas</h4><p class="text-4xl font-black">21</p></div>
                            <div class="bg-gray-900/50 p-4 rounded-lg text-center"><h4 class="font-semibold text-brand-primary">Bíceps</h4><p class="text-4xl font-black">9</p></div>
                            <div class="bg-gray-900/50 p-4 rounded-lg text-center"><h4 class="font-semibold text-brand-primary">Tríceps</h4><p class="text-4xl font-black">13</p></div>
                        </div>
                    </div>
                    <div class="bg-brand-surface p-6 rounded-lg shadow-lg card-border-gradient">
                        <h3 class="text-2xl font-bold mb-4 text-white">Macros Diarios</h3>
                         <div class="chart-container">
                            <canvas id="macroChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="tools" class="page">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-brand-primary mb-2">Herramientas de Entrenamiento</h2>
                    <p class="text-brand-text-muted max-w-3xl mx-auto">Calculadoras para optimizar tu tiempo y esfuerzo en el gimnasio.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="p-6 rounded-lg shadow-lg tool-card border border-gray-800">
                         <h3 class="text-xl font-bold mb-4 text-white">Calculadora de 1RM (Repetición Máxima)</h3>
                         <div class="space-y-4">
                            <div>
                                <label for="rmWeight" class="block text-sm font-medium text-brand-text-muted">Peso Levantado (kg)</label>
                                <input type="number" id="rmWeight" class="mt-1 block w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-brand-primary focus:border-brand-primary" placeholder="80">
                            </div>
                            <div>
                                <label for="rmReps" class="block text-sm font-medium text-brand-text-muted">Repeticiones Completadas</label>
                                <input type="number" id="rmReps" class="mt-1 block w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-brand-primary focus:border-brand-primary" placeholder="5">
                            </div>
                            <button id="calculateRM" class="w-full bg-brand-primary text-white font-bold py-2 px-4 rounded-lg shadow-glow hover:bg-brand-primary-darker transition-all">Calcular 1RM Estimado</button>
                            <div id="rmResult" class="text-center bg-gray-900 p-4 rounded-lg hidden"><p class="text-brand-text-muted">Tu 1RM estimado es:</p><p class="text-4xl font-black text-brand-primary">93.3 kg</p></div>
                         </div>
                    </div>
                    <div class="p-6 rounded-lg shadow-lg tool-card border border-gray-800">
                        <h3 class="text-xl font-bold mb-4 text-white">Calculadora de Placas (Barra Olímpica 20kg)</h3>
                         <div class="space-y-4">
                            <div>
                                <label for="plateWeight" class="block text-sm font-medium text-brand-text-muted">Peso Total en la Barra (kg)</label>
                                <input type="number" id="plateWeight" class="mt-1 block w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-brand-primary focus:border-brand-primary" placeholder="100">
                            </div>
                            <button id="calculatePlates" class="w-full bg-brand-primary text-white font-bold py-2 px-4 rounded-lg shadow-glow hover:bg-brand-primary-darker transition-all">Calcular Placas</button>
                            <div id="plateResult" class="text-center bg-gray-900 p-4 rounded-lg hidden">
                                <p class="text-brand-text-muted mb-2">Poner en cada lado:</p>
                                <div id="plateResultContent" class="grid grid-cols-2 sm:grid-cols-3 gap-2 text-sm"></div>
                            </div>
                         </div>
                    </div>
                </div>
            </section>

            <section id="progress" class="page">
                <div class="text-center mb-8"><h2 class="text-3xl font-bold text-brand-primary mb-2">Registro de Progreso</h2><p class="text-brand-text-muted max-w-3xl mx-auto">Anota tus avances para mantener la motivación y ajustar el plan.</p></div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="bg-brand-surface p-6 rounded-lg shadow-lg"><h3 class="text-xl font-semibold mb-4 text-white">Peso y Medidas</h3><div class="space-y-4"><div><label for="weight" class="block text-sm font-medium text-brand-text-muted">Peso Actual (kg)</label><input type="text" id="weight" class="mt-1 block w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md focus:outline-none focus:ring-brand-primary" placeholder="89.5"></div><div><label for="chest" class="block text-sm font-medium text-brand-text-muted">Pecho (cm)</label><input type="text" id="chest" class="mt-1 block w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md focus:outline-none focus:ring-brand-primary" placeholder="110"></div><div><label for="waist" class="block text-sm font-medium text-brand-text-muted">Cintura (cm)</label><input type="text" id="waist" class="mt-1 block w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md focus:outline-none focus:ring-brand-primary" placeholder="84"></div><div><label for="bicep" class="block text-sm font-medium text-brand-text-muted">Bíceps (cm)</label><input type="text" id="bicep" class="mt-1 block w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md focus:outline-none focus:ring-brand-primary" placeholder="40.5"></div></div></div><div class="bg-brand-surface p-6 rounded-lg shadow-lg"><h3 class="text-xl font-semibold mb-4 text-white">Notas Adicionales</h3><textarea class="mt-1 block w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md h-64 text-brand-text focus:outline-none focus:ring-brand-primary" placeholder="Anota aquí cualquier observación: cómo te sentiste, un récord personal, etc."></textarea></div></div>
            </section>

            <section id="routine" class="page">
                 <div class="text-center mb-8"><h2 class="text-3xl font-bold text-brand-primary mb-2">Rutina de Entrenamiento Semanal</h2><p class="text-brand-text-muted max-w-3xl mx-auto">El plan de batalla. Selecciona un día para ver los detalles.</p></div>
                <div id="routine-nav" class="flex flex-wrap justify-center gap-2 mb-6"><button data-day="day1" class="day-btn active px-4 py-2 text-sm font-medium rounded-md bg-brand-surface hover:bg-brand-primary-darker transition-colors">Día 1</button><button data-day="day2" class="day-btn px-4 py-2 text-sm font-medium rounded-md bg-brand-surface hover:bg-brand-primary-darker transition-colors">Día 2</button><button data-day="day3" class="day-btn px-4 py-2 text-sm font-medium rounded-md bg-brand-surface hover:bg-brand-primary-darker transition-colors">Día 3</button><button data-day="day4" class="day-btn px-4 py-2 text-sm font-medium rounded-md bg-brand-surface hover:bg-brand-primary-darker transition-colors">Día 4</button><button data-day="day5" class="day-btn px-4 py-2 text-sm font-medium rounded-md bg-brand-surface hover:bg-brand-primary-darker transition-colors">Día 5</button></div>
                <div id="workouts-container"><div id="day1" class="workout-day active"></div><div id="day2" class="workout-day"></div><div id="day3" class="workout-day"></div><div id="day4" class="workout-day"></div><div id="day5" class="workout-day"></div></div>
            </section>
            
            <section id="accessories" class="page">
                 <div class="text-center mb-8"><h2 class="text-3xl font-bold text-brand-primary mb-2">Ejercicios Accesorios</h2><p class="text-brand-text-muted max-w-3xl mx-auto">Rutina de enfoque para abdomen y antebrazo. Intégralos en tus días de entrenamiento.</p></div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="bg-brand-surface p-6 rounded-lg shadow-lg"><h3 class="text-2xl font-semibold mb-4 text-white">Abdomen / Core</h3><p class="text-brand-text-muted mb-4">Realizar 2-3 de estos, 3 veces por semana.</p><div class="space-y-4"><div class="bg-gray-900/50 p-3 rounded-lg"><p class="font-semibold text-brand-primary">Plancha Abdominal</p><p class="text-sm text-brand-text-muted">3 series al fallo. Descanso 60s.</p></div><div class="bg-gray-900/50 p-3 rounded-lg"><p class="font-semibold text-brand-primary">Elevaciones de Piernas Colgado</p><p class="text-sm text-brand-text-muted">3 series al fallo. Descanso 60s.</p></div><div class="bg-gray-900/50 p-3 rounded-lg"><p class="font-semibold text-brand-primary">Ab Wheel (Rueda Abdominal)</p><p class="text-sm text-brand-text-muted">3 series al fallo. Descanso 60-90s.</p></div><div class="bg-gray-900/50 p-3 rounded-lg"><p class="font-semibold text-brand-primary">Crunch en Polea Alta</p><p class="text-sm text-brand-text-muted">3 series de 12-20 reps. Descanso 60s.</p></div></div></div><div class="bg-brand-surface p-6 rounded-lg shadow-lg"><h3 class="text-2xl font-semibold mb-4 text-white">Antebrazo y Agarre</h3><p class="text-brand-text-muted mb-4">Realizar 2 de estos, 2 veces por semana.</p><div class="space-y-4"><div class="bg-gray-900/50 p-3 rounded-lg"><p class="font-semibold text-brand-primary">Curl Inverso con Barra</p><p class="text-sm text-brand-text-muted">3 series de 10-15 reps. Descanso 60s.</p></div><div class="bg-gray-900/50 p-3 rounded-lg"><p class="font-semibold text-brand-primary">Curl Martillo</p><p class="text-sm text-brand-text-muted">3 series de 10-15 reps. Descanso 60s.</p></div><div class="bg-gray-900/50 p-3 rounded-lg"><p class="font-semibold text-brand-primary">Paseo del Granjero</p><p class="text-sm text-brand-text-muted">3 series de 30-40 metros. Descanso 90s.</p></div><div class="bg-gray-900/50 p-3 rounded-lg"><p class="font-semibold text-brand-primary">Aguante de disco (Plate Pinch)</p><p class="text-sm text-brand-text-muted">3 series al fallo por mano. Descanso 60s.</p></div></div></div></div>
            </section>
            
            <section id="nutrition" class="page">
                <div class="text-center mb-8"><h2 class="text-3xl font-bold text-brand-primary mb-2">Plan Nutricional Detallado</h2><p class="text-brand-text-muted max-w-3xl mx-auto">Los números que construyen tu físico. Calculado para 20 años.</p></div>
                <div class="bg-brand-surface p-6 rounded-lg shadow-lg"><h3 class="text-xl font-semibold mb-4 text-white">Cálculo de Necesidades Energéticas</h3><div class="overflow-x-auto"><table class="w-full text-left"><thead><tr class="border-b border-gray-700"><th class="p-3 font-semibold text-sm">Parámetro</th><th class="p-3 font-semibold text-sm">Cálculo (Edad: 20)</th><th class="p-3 font-semibold text-sm text-right">Resultado</th></tr></thead><tbody><tr class="border-b border-gray-700"><td>TMB</td><td class="text-sm text-brand-text-muted">Mifflin-St Jeor: 10*90 + 6.25*172 - 5*20 + 5</td><td class="font-bold text-right">1880 kcal</td></tr><tr class="border-b border-gray-700"><td>TDEE</td><td class="text-sm text-brand-text-muted">TMB * 1.55</td><td class="font-bold text-right">2914 kcal</td></tr><tr class="bg-brand-primary/10"><td><span class="font-bold text-brand-primary">Objetivo Calórico</span></td><td class="text-sm text-brand-primary/80">TDEE - 314 kcal</td><td class="font-bold text-brand-primary text-right text-lg">~2600 kcal</td></tr></tbody></table></div><h3 class="text-xl font-semibold mt-8 mb-4 text-white">Distribución de Macronutrientes</h3><ul class="space-y-4"><li><h4 class="font-semibold text-lg">Proteínas: <span class="text-brand-primary">180g</span></h4></li><li><h4 class="font-semibold text-lg">Grasas: <span class="text-brand-primary">72g</span></h4></li><li><h4 class="font-semibold text-lg">Carbohidratos: <span class="text-brand-primary">308g</span></h4></li></ul></div>
            </section>
            
            <section id="fundamentals" class="page">
                <div class="text-center mb-8"><h2 class="text-3xl font-bold text-brand-primary mb-2">Fundamentos Científicos</h2><p class="text-brand-text-muted max-w-3xl mx-auto">Conocimiento es poder. Entiende el porqué de tu plan.</p></div>
                <div class="space-y-4"><div class="accordion-item bg-brand-surface rounded-lg"><button class="accordion-header w-full text-left p-4 font-semibold text-lg flex justify-between items-center text-white"><span>Principios Clave de Hipertrofia</span><span class="transform transition-transform duration-300">▼</span></button><div class="accordion-content"><div class="p-4 pt-0 text-brand-text-muted text-sm space-y-4"><p><strong class="text-white">Volumen, Intensidad y Frecuencia:</strong> Los 3 pilares. Este plan los manipula para maximizar el crecimiento.</p><p><strong class="text-white">Proximidad al Fallo (RIR):</strong> Es crucial. Entrenar cerca del fallo (1-3 reps antes) asegura que el estímulo sea suficiente. No es necesario fallar en cada serie.</p><div><h5 class="font-bold text-white mb-2">Guía de Repeticiones en Reserva (RIR)</h5><ul class="list-disc list-inside space-y-1"><li class="text-brand-primary"><span class="text-white font-bold">RIR 3:</span> Fácil, podrías hacer 3 reps más. Bueno para calentamiento.</li><li class="text-brand-primary"><span class="text-white font-bold">RIR 2:</span> Desafiante, te quedan 2 reps. El punto ideal para la mayoría de series.</li><li class="text-brand-primary"><span class="text-white font-bold">RIR 1:</span> Muy difícil, solo te queda 1 rep. Excelente para series pesadas.</li><li class="text-red-400"><span class="text-white font-bold">RIR 0:</span> Fallo muscular. Usar con moderación en ejercicios de aislamiento.</li></ul></div></div></div></div></div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const workoutData = {
                day1: { title: "Pecho, Hombro (Frontal/Lateral), Tríceps", exercises: [{ name: "Press Banca", sets: 4, reps: "5-8" }, { name: "Press Inclinado Mancuernas", sets: 3, reps: "8-12" }, { name: "Aperturas en Pec-Deck", sets: 3, reps: "12-15" }, { name: "Press Militar Sentado", sets: 4, reps: "6-10" }, { name: "Elevaciones Laterales", sets: 4, reps: "12-20" }, { name: "Fondos en Paralelas", sets: 3, reps: "6-10" }, { name: "Extensiones sobre Cabeza", sets: 3, reps: "10-15" }] },
                day2: { title: "Espalda (Densidad), Hombro Post., Bíceps + LISS", exercises: [{ name: "Remo con Barra", sets: 4, reps: "5-8" }, { name: "Remo con Mancuerna", sets: 3, reps: "8-12" }, { name: "Remo en Máquina", sets: 3, reps: "12-15" }, { name: "Face Pulls", sets: 4, reps: "15-20" }, { name: "Curl Concentración", sets: 3, reps: "10-15" }, { name: "Curl Inclinado", sets: 3, reps: "8-12" }, { name: "Cardio LISS", sets: 1, reps: "30-40 min" }] },
                day3: { title: "Piernas y Glúteos", exercises: [{ name: "Prensa de Piernas", sets: 4, reps: "8-12" }, { name: "Sentadilla Búlgara", sets: 3, reps: "10-15" }, { name: "Peso Muerto Rumano (RDL)", sets: 4, reps: "8-12" }, { name: "Hip Thrust", sets: 4, reps: "8-12" }, { name: "Extensiones Cuádriceps", sets: 3, reps: "15-20" }, { name: "Curl Femoral", sets: 3, reps: "12-15" }] },
                day4: { title: "Espalda (Amplitud), Hombro Post., Bíceps + LISS", exercises: [{ name: "Dominadas o Jalón al Pecho", sets: 4, reps: "6-10" }, { name: "Jalón Agarre Neutro", sets: 3, reps: "10-15" }, { name: "Pullover en Polea", sets: 3, reps: "15-20" }, { name: "Elevaciones Laterales Polea", sets: 3, reps: "12-15" }, { name: "Face Pulls", sets: 4, reps: "15-20" }, { name: "Curl Predicador", sets: 3, reps: "10-15" }, { name: "Cardio LISS", sets: 1, reps: "30-40 min" }] },
                day5: { title: "Pecho, Hombros (General), Tríceps + HIIT", exercises: [{ name: "Press Pecho Máquina", sets: 4, reps: "10-15" }, { name: "Aperturas Inclinadas", sets: 3, reps: "12-15" }, { name: "Press Arnold", sets: 3, reps: "10-15" }, { name: "Elevaciones Frontales", sets: 3, reps: "12-15" }, { name: "Patada Tríceps", sets: 3, reps: "12-15" }, { name: "Pushdown Cuerda", sets: 4, reps: "12-20" }, { name: "Cardio HIIT", sets: 1, reps: "20 min" }] }
            };

            function generateWorkoutHTML(dayData) {
                let html = `<div class="bg-brand-surface p-4 sm:p-6 rounded-lg shadow-lg">`;
                html += `<h3 class="text-xl sm:text-2xl font-bold mb-4 text-brand-primary">${dayData.title}</h3>`;
                html += `<div class="space-y-4">`;
                dayData.exercises.forEach(ex => {
                    html += `<div class="border-b border-gray-800 pb-3 last:border-b-0 flex justify-between items-center"><div><h4 class="font-semibold text-lg text-white">${ex.name}</h4></div><p class="font-bold text-brand-primary text-xl">${ex.sets} x ${ex.reps}</p></div>`;
                });
                html += `</div></div>`;
                return html;
            }

            Object.keys(workoutData).forEach(dayId => {
                const container = document.getElementById(dayId);
                if (container) container.innerHTML = generateWorkoutHTML(workoutData[dayId]);
            });

            document.getElementById('main-nav').addEventListener('click', (e) => {
                const targetEl = e.target.closest('a');
                if (!targetEl || !targetEl.dataset.target) return;
                e.preventDefault();
                const targetId = targetEl.dataset.target;
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.getElementById(targetId).classList.add('active');
                document.querySelectorAll('#main-nav .nav-link').forEach(l => l.classList.remove('active'));
                targetEl.classList.add('active');
            });

            document.getElementById('routine-nav').addEventListener('click', (e) => {
                const targetEl = e.target.closest('button');
                if (!targetEl || !targetEl.dataset.day) return;
                const dayId = targetEl.dataset.day;
                document.querySelectorAll('.workout-day').forEach(d => d.classList.remove('active'));
                document.getElementById(dayId).classList.add('active');
                document.querySelectorAll('#routine-nav .day-btn').forEach(b => b.classList.remove('active'));
                targetEl.classList.add('active');
            });
            
            document.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const isOpen = content.style.maxHeight && content.style.maxHeight !== '0px';
                    content.style.maxHeight = isOpen ? '0px' : content.scrollHeight + 'px';
                    header.querySelector('span').classList.toggle('rotate-180', !isOpen);
                });
            });

            document.getElementById('calculateRM').addEventListener('click', () => {
                const weight = parseFloat(document.getElementById('rmWeight').value);
                const reps = parseInt(document.getElementById('rmReps').value);
                const resultDiv = document.getElementById('rmResult');
                if (weight > 0 && reps > 0) {
                    const rm = weight * (1 + reps / 30);
                    resultDiv.querySelector('p:last-child').textContent = rm.toFixed(1) + ' kg';
                    resultDiv.classList.remove('hidden');
                }
            });
            
            document.getElementById('calculatePlates').addEventListener('click', () => {
                const totalWeight = parseFloat(document.getElementById('plateWeight').value);
                const barWeight = 20;
                const plateResultContent = document.getElementById('plateResultContent');
                const resultDiv = document.getElementById('plateResult');

                if (totalWeight >= barWeight && (totalWeight - barWeight) % 2.5 === 0) {
                    let weightPerSide = (totalWeight - barWeight) / 2;
                    const plates = [20, 15, 10, 5, 2.5, 1.25];
                    let layout = '';
                    plates.forEach(plate => {
                        let count = Math.floor(weightPerSide / plate);
                        if (count > 0) {
                            layout += `<div class="bg-gray-800 p-2 rounded"><span>${count} x </span><span class="font-bold text-brand-primary">${plate} kg</span></div>`;
                            weightPerSide -= count * plate;
                        }
                    });
                    plateResultContent.innerHTML = layout || '<p>Solo la barra.</p>';
                    resultDiv.classList.remove('hidden');
                } else {
                     plateResultContent.innerHTML = '<p class="col-span-full text-red-400">Peso inválido. Debe ser >= 20kg y en incrementos de 2.5kg.</p>';
                     resultDiv.classList.remove('hidden');
                }
            });

            Chart.defaults.color = '#A3A3A3';
            new Chart('macroChart', {
                type: 'doughnut',
                data: {
                    labels: ['Proteínas', 'Carbs', 'Grasas'],
                    datasets: [{
                        data: [180 * 4, 308 * 4, 72 * 9],
                        backgroundColor: ['#DC2626', '#7C3AED', '#4B5563'], // Red, A different accent, Gray
                        borderColor: '#191919',
                        borderWidth: 4,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false, cutout: '70%',
                    plugins: { legend: { display: false } }
                }
            });
        });
    </script>
</body>
</html>
