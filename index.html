<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Pro Daniel Ramírez - Red & Black Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Minimalist Red & Black -->
    <!-- Application Structure Plan: La app ha sido rediseñada con una estética rojo/negro. La sección "Progreso" ha sido expandida significativamente para incluir un registro de levantamientos con filtro por ejercicio, permitiendo un seguimiento de la sobrecarga progresiva. Se ha añadido una nueva tarjeta de "Calculadoras de Entrenamiento" en "Recursos" con herramientas para estimar el 1RM y calcular el peso de trabajo basado en el RIR, respondiendo a la petición de herramientas fundamentales para el entrenamiento avanzado. -->
    <!-- Visualization & Content Choices: 1. Registro de Levantamientos: (Meta: Analizar) Un formulario y una tabla dinámica con un filtro desplegable (HTML/JS) para un seguimiento detallado. Justificación: Funcionalidad esencial para atletas serios que basan su progreso en la sobrecarga progresiva. 2. Calculadoras de Entrenamiento: (Meta: Informar/Planificar) Formularios simples (HTML/JS) que aplican fórmulas estándar (Epley para 1RM) para dar feedback inmediato al usuario. Justificación: Empodera al usuario con herramientas para autorregular su entrenamiento de forma científica. 3. Estilo Visual: El tema rojo/negro se aplica globalmente, incluyendo el gráfico de Chart.js y los estados 'focus' de los formularios, para una experiencia visual cohesiva y minimalista. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        :root { --main-red: #dc2626; --dark-bg: #101010; --card-bg: #181818; --text-light: #e5e5e5; --text-dark: #a3a3a3; }
        body { font-family: 'Inter', sans-serif; background-color: var(--dark-bg); color: var(--text-light); }
        .nav-link.active { background-color: var(--main-red); color: white; }
        .nav-link:not(.active) { color: var(--text-dark); hover:bg-gray-800; }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .chart-container { position: relative; margin: auto; height: 280px; width: 280px; }
        @media (min-width: 640px) { .chart-container { height: 320px; width: 320px; } }
        .workout-day-btn.active { background-color: var(--main-red); color: white; }
        .workout-day-btn:not(.active) { background-color: #262626; color: var(--text-dark); hover:bg-gray-700; border-color: #404040; }
        .card { background-color: var(--card-bg); border: 1px solid #262626; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1); padding: 1.5rem; transition: all 0.3s; }
        .card:hover { border-color: var(--main-red); }
        .nav-link-mobile.active { border-top: 2px solid var(--main-red); color: var(--main-red); }
        .nav-link-mobile.active > span { color: var(--main-red); font-weight: 600; }
        .form-input { background-color: #262626; border: 1px solid #404040; border-radius: 0.375rem; padding: 0.5rem 0.75rem; color: var(--text-light); placeholder-color: var(--text-dark); }
        .form-input:focus { outline: none; ring: 2px; ring-color: var(--main-red); border-color: var(--main-red); }
        .btn-primary { background-color: var(--main-red); color: white; font-weight: bold; padding: 0.5rem 1rem; border-radius: 0.375rem; transition: background-color 0.2s; }
        .btn-primary:hover { background-color: #b91c1c; }
        .btn-danger { background-color: #991b1b; color: white; padding: 0.25rem 0.5rem; font-size: 0.75rem; border-radius: 0.25rem; }
        .btn-danger:hover { background-color: #7f1d1d; }
    </style>
</head>
<body class="antialiased">
    <div class="min-h-screen">
        <header class="bg-black/50 backdrop-blur-md shadow-lg sticky top-0 z-20">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex items-center justify-between h-16">
                <div class="flex items-center"><span class="text-2xl font-bold" style="color: var(--main-red);">🔥</span><h1 class="ml-3 text-xl font-bold tracking-tight">Plan Pro Daniel Ramírez</h1></div>
                <nav class="hidden md:flex space-x-2" id="main-nav"><a data-tab="resumen" class="nav-link active">Resumen</a><a data-tab="nutricion" class="nav-link">Nutrición</a><a data-tab="entrenamiento" class="nav-link">Entrenamiento</a><a data-tab="progreso" class="nav-link">Progreso</a><a data-tab="recursos" class="nav-link">Recursos</a></nav>
            </div></div>
        </header>

        <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"><div class="px-4 py-6 sm:px-0">
            <section id="resumen" class="content-section active">
                <div class="text-center mb-10"><h2 class="text-3xl font-bold tracking-tight sm:text-4xl text-transparent bg-clip-text bg-gradient-to-r from-white to-red-400">Tu Panel de Control</h2><p class="mt-4 text-lg text-gray-400">Objetivos nutricionales para máxima definición.</p></div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                    <div class="flex flex-col items-center"><div class="chart-container"><canvas id="macroChart"></canvas></div></div>
                    <div class="space-y-6">
                        <div class="card text-center"><h3 class="text-lg font-semibold text-gray-500">Calorías Totales</h3><p id="total-calorias" class="text-5xl font-bold text-white">2270</p><p class="text-sm text-gray-400">kcal/día</p></div>
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                            <div class="card text-center"><h4 class="text-md font-semibold text-red-500">Proteínas</h4><p id="gramos-proteina" class="text-3xl font-bold">225g</p></div>
                            <div class="card text-center"><h4 class="text-md font-semibold text-gray-300">Carbs</h4><p id="gramos-carbs" class="text-3xl font-bold">200g</p></div>
                            <div class="card text-center"><h4 class="text-md font-semibold text-gray-500">Grasas</h4><p id="gramos-grasas" class="text-3xl font-bold">63g</p></div>
                        </div>
                    </div>
                </section>

            <section id="nutricion" class="content-section">
                 <div class="text-center mb-10"><h2 class="text-3xl font-bold tracking-tight sm:text-4xl">Arquitectura Nutricional</h2><p class="mt-4 text-lg text-gray-400">Usa la matriz para personalizar tus comidas.</p></div>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                    <div class="card"><h3 class="text-xl font-bold mb-4">Plan de Alimentación</h3><ul class="space-y-3 text-gray-300"><li><strong style="color: var(--main-red);">Comida 1:</strong> 5 claras + 1 huevo, 1/2 aguacate.</li><li><strong style="color: var(--main-red);">Comida 2:</strong> 200g yogur griego, frutos rojos.</li><li><strong style="color: var(--main-red);">Comida 3 (Pre):</strong> 200g pollo, 200g arroz, brócoli.</li><li><strong style="color: var(--main-red);">Comida 4 (Post):</strong> 40g whey. Luego: 180g lomo, 250g papa.</li><li><strong style="color: var(--main-red);">Comida 5:</strong> 200g cottage o 180g salmón, almendras.</li></ul></div>
                    <div class="card"><h3 class="text-xl font-bold mb-4">Estrategia y Flexibilidad</h3><div class="space-y-4 text-gray-300"><p><strong style="color: var(--main-red);">Frecuencia:</strong> 4-6 comidas para optimizar MPS.</p><p><strong style="color: var(--main-red);">Timing de Carbs:</strong> Concentra carbs pre/post entreno.</p><p><strong style="color: var(--main-red);">Consistencia:</strong> Es la clave, mantén calorías y proteína estables.</p><p><strong style="color: var(--main-red);">Hidratación:</strong> Mínimo 3-4 litros de agua/día.</p></div></div>
                </div>
                <div class="card"><h3 class="text-xl font-bold mb-4 text-center">Matriz de Selección de Alimentos</h3><div class="overflow-x-auto"><table class="w-full text-sm text-left text-gray-400"><thead class="text-xs text-gray-300 uppercase bg-black/30"><tr><th class="px-6 py-3">Proteína</th><th class="px-6 py-3">Carbs</th><th class="px-6 py-3">Grasas</th><th class="px-6 py-3">Verduras/Frutas</th></tr></thead><tbody class="divide-y divide-gray-800"><tr><td class="px-6 py-4">Pechuga de pollo/pavo</td><td class="px-6 py-4">Avena, arroz</td><td class="px-6 py-4">Aguacate</td><td class="px-6 py-4">Brócoli, espinaca</td></tr><tr><td class="px-6 py-4">Lomo de res/cerdo</td><td class="px-6 py-4">Papa, batata, yuca</td><td class="px-6 py-4">Aceite de oliva</td><td class="px-6 py-4">Coliflor, pimentón</td></tr><tr><td class="px-6 py-4">Pescado blanco</td><td class="px-6 py-4">Plátano, pasta</td><td class="px-6 py-4">Nueces, almendras</td><td class="px-6 py-4">Cebolla, tomate</td></tr></tbody></table></div></div>
            </section>
            
            <section id="entrenamiento" class="content-section">
                <div class="text-center mb-10"><h2 class="text-3xl font-bold tracking-tight sm:text-4xl">Protocolo de Entrenamiento</h2><p class="mt-4 text-lg text-gray-400">Enfoque en técnica, RIR y sobrecarga progresiva.</p></div>
                <div class="flex justify-center flex-wrap gap-2 mb-8" id="workout-nav"><button data-day="1" class="workout-day-btn active">Día 1</button><button data-day="2" class="workout-day-btn">Día 2</button><button data-day="3" class="workout-day-btn">Día 3</button><button data-day="4" class="workout-day-btn">Día 4</button><button data-day="5" class="workout-day-btn">Día 5</button></div>
                <div id="workout-content" class="card"></div>
            </section>
            
            <section id="progreso" class="content-section">
                <div class="text-center mb-10"><h2 class="text-3xl font-bold tracking-tight sm:text-4xl">Tu Centro de Progreso</h2><p class="mt-4 text-lg text-gray-400">Registra tus métricas, notas y levantamientos. La data es poder.</p></div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="card space-y-4"><h3 class="text-xl font-bold text-center text-red-500">Registro de Medidas</h3>
                        <form id="measurement-form" class="grid grid-cols-2 gap-4"><input type="date" id="measure-date" class="form-input col-span-2"><input type="number" step="0.1" id="measure-weight" placeholder="Peso (kg)" class="form-input"><input type="number" step="0.1" id="measure-waist" placeholder="Cintura (cm)" class="form-input"><input type="number" step="0.1" id="measure-chest" placeholder="Pecho (cm)" class="form-input"><input type="number" step="0.1" id="measure-arm" placeholder="Brazo (cm)" class="form-input"><button type="submit" class="btn-primary col-span-2">Guardar Medidas</button></form>
                        <div class="overflow-auto max-h-60"><table class="w-full text-sm text-left"><thead class="text-xs text-red-400 uppercase bg-black/30"><tr><th class="p-2">Fecha</th><th class="p-2">Peso</th><th class="p-2">Cintura</th><th class="p-2"></th></tr></thead><tbody id="measurements-history" class="divide-y divide-gray-800"></tbody></table></div>
                    </div>
                    <div class="card space-y-4"><h3 class="text-xl font-bold text-center text-red-500">Bitácora de Notas</h3>
                        <form id="notes-form" class="space-y-4"><textarea id="note-text" rows="4" class="form-input" placeholder="Anota tus victorias, sensaciones, ajustes..."></textarea><button type="submit" class="btn-primary">Guardar Nota</button></form>
                        <div id="notes-history" class="space-y-3 overflow-auto max-h-60 pr-2"></div>
                    </div>
                    <div class="card lg:col-span-2 space-y-4"><h3 class="text-xl font-bold text-center text-red-500">Registro de Levantamientos</h3>
                        <form id="lift-form" class="grid grid-cols-1 sm:grid-cols-4 gap-4 items-end">
                            <div class="sm:col-span-2"><label for="lift-exercise" class="text-xs text-gray-400">Ejercicio</label><select id="lift-exercise" class="form-input w-full"></select></div>
                            <div><label for="lift-weight" class="text-xs text-gray-400">Peso (kg)</label><input type="number" step="0.5" id="lift-weight" placeholder="kg" class="form-input"></div>
                            <div><label for="lift-reps" class="text-xs text-gray-400">Reps</label><input type="number" id="lift-reps" placeholder="Reps" class="form-input"></div>
                            <button type="submit" class="btn-primary sm:col-span-4">Guardar Levantamiento</button>
                        </form>
                        <div class="flex justify-between items-center"><h4 class="text-lg font-semibold">Historial</h4><select id="lift-filter" class="form-input w-1/2 sm:w-1/3"></select></div>
                        <div class="overflow-auto max-h-72"><table class="w-full text-sm text-left"><thead class="text-xs text-red-400 uppercase bg-black/30"><tr><th class="p-2">Fecha</th><th class="p-2">Ejercicio</th><th class="p-2">Peso</th><th class="p-2">Reps</th><th class="p-2"></th></tr></thead><tbody id="lifts-history" class="divide-y divide-gray-800"></tbody></table></div>
                    </div>
                </div>
            </section>
            
            <section id="recursos" class="content-section">
                <div class="text-center mb-10"><h2 class="text-3xl font-bold tracking-tight sm:text-4xl">Caja de Herramientas</h2><p class="mt-4 text-lg text-gray-400">Conocimiento clave para potenciar tus resultados.</p></div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="card lg:col-span-3"><h3 class="text-2xl font-bold mb-4">Calculadoras de Entrenamiento</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div><h4 class="font-bold text-lg text-red-500 mb-2">Calculadora de 1RM Estimado</h4><form id="1rm-form" class="space-y-3"><input type="number" id="1rm-weight" placeholder="Peso levantado (kg)" class="form-input"><input type="number" id="1rm-reps" placeholder="Repeticiones completadas" class="form-input"><button type="submit" class="btn-primary w-full">Calcular 1RM</button></form><p id="1rm-result" class="mt-3 font-bold text-center text-xl"></p></div>
                        <div><h4 class="font-bold text-lg text-red-500 mb-2">Calculadora de Peso por RIR</h4><form id="rir-form" class="space-y-3"><input type="number" id="rir-1rm" placeholder="Tu 1RM estimado (kg)" class="form-input"><input type="number" id="rir-reps" placeholder="Repeticiones objetivo" class="form-input"><input type="number" id="rir-rir" placeholder="RIR deseado (0-3)" class="form-input"><button type="submit" class="btn-primary w-full">Calcular Peso</button></form><p id="rir-result" class="mt-3 font-bold text-center text-xl"></p></div>
                    </div></div>
                    <div class="card"><h3 class="text-2xl font-bold mb-4">Fundamentales</h3><ul class="text-sm list-disc list-inside text-gray-300 space-y-2"><li><strong>Abdomen:</strong> Sobrecarga progresiva con ejercicios como Crunch en Polea y Elev. de Piernas Colgado.</li><li><strong>Antebrazo:</strong> Atacar con flexión/extensión de muñeca y trabajo de agarre (Paseo del Granjero).</li></ul></div>
                    <div class="card"><h3 class="text-2xl font-bold mb-4">Ciencia</h3><ul class="text-sm list-disc list-inside text-gray-300 space-y-2"><li><strong>Déficit Calórico:</strong> Esencial para la oxidación de grasa.</li><li><strong>Proteína Elevada:</strong> Clave para la retención de masa muscular.</li><li><strong>Sobrecarga Progresiva:</strong> El pilar del progreso a largo plazo.</li></ul></div>
                    <div class="card"><h3 class="text-2xl font-bold mb-4">Mindset</h3><ul class="text-sm list-disc list-inside text-gray-300 space-y-2"><li><strong>Consistencia > Perfección.</strong></li><li><strong>Paciencia y objetividad.</strong></li><li><strong>Conexión Mente-Músculo.</strong></li></ul></div>
                </div>
            </section>
        </div></main>

        <div class="fixed bottom-0 left-0 right-0 bg-black/80 backdrop-blur-md shadow-[0_-2px_10px_rgba(0,0,0,0.5)] md:hidden h-16">
            <nav class="flex justify-around items-center h-full" id="mobile-nav"><a data-tab="resumen" class="nav-link-mobile active flex flex-col items-center text-xs p-1 text-gray-400">📊<span class="mt-1">Resumen</span></a><a data-tab="nutricion" class="nav-link-mobile flex flex-col items-center text-xs p-1 text-gray-400">🍎<span class="mt-1">Nutrición</span></a><a data-tab="entrenamiento" class="nav-link-mobile flex flex-col items-center text-xs p-1 text-gray-400">🏋️<span class="mt-1">Entreno</span></a><a data-tab="progreso" class="nav-link-mobile flex flex-col items-center text-xs p-1 text-gray-400">📈<span class="mt-1">Progreso</span></a><a data-tab="recursos" class="nav-link-mobile flex flex-col items-center text-xs p-1 text-gray-400">🧠<span class="mt-1">Recursos</span></a></nav>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const macroData = { calorias: 2270, proteina: 225, carbs: 200, grasas: 63 };
    const workoutData = {'1':{title:'Día 1: Pecho, Hombro Frontal/Lateral, Tríceps',exercises:[{name:'Press de Banca con Barra (Plano)'},{name:'Press Inclinado con Mancuernas'},{name:'Press Militar con Barra (Sentado)'},{name:'Elevaciones Laterales con Mancuernas'},{name:'Extensiones de Tríceps en Polea Alta'},{name:'Fondos en Paralelas (o Máquina)'},{name:'Crunch en Cable (de Rodillas)'},{name:'Elevaciones de Piernas Colgado'}]},'2':{title:'Día 2: Espalda (Densidad), Hombro Posterior, Bíceps',exercises:[{name:'Peso Muerto Rumano (RDL)'},{name:'Remo con Barra (Agarre Prono)'},{name:'Remo con Mancuerna (Una mano)'},{name:'Face Pulls'},{name:'Curl de Bíceps con Barra Z'},{name:'Curl Martillo con Mancuernas'},{name:'Curl de Muñeca (Palmas arriba/abajo)'}]},'3':{title:'Día 3: Piernas, Glúteos y Abdomen',exercises:[{name:'Prensa de Piernas'},{name:'Hip Thrust con Barra'},{name:'Curl de Isquiotibiales (Tumbado)'},{name:'Extensiones de Cuádriceps'},{name:'Abducción de Cadera en Máquina'},{name:'Elevación de Gemelos (de Pie)'},{name:'Plancha (Core)'},{name:'Plancha Lateral'}]},'4':{title:'Día 4: Espalda (Amplitud), Bíceps, Hombro Posterior',exercises:[{name:'Jalón al Pecho (Agarre Ancho)'},{name:'Remo en Polea Baja (Agarre Neutro)'},{name:'Pullover con Cable'},{name:'Elevaciones Posteriores (Pájaro)'},{name:'Curl Predicador con Barra Z'},{name:'Curl de Concentración'},{name:'Paseo del Granjero'}]},'5':{title:'Día 5: Pecho, Hombros, Tríceps (Hipertrofia)',exercises:[{name:'Press de Banca Inclinado con Barra'},{name:'Press de Hombros con Mancuernas'},{name:'Cruces en Polea Alta'},{name:'Elevaciones Laterales Sentado'},{name:'Extensiones Tríceps sobre Cabeza'},{name:'Press Francés con Mancuernas'},{name:'Rueda Abdominal'},{name:'Rotaciones Rusas con Peso'}]}};
    const fullWorkoutData = {'1':{title:'Día 1: Pecho, Hombro, Tríceps',description:'Énfasis en fuerza e hipertrofia.',exercises:[{name:'Press de Banca con Barra (Plano)',sets:4,reps:'6-10',rest:'180s',rir:'2'},{name:'Press Inclinado con Mancuernas',sets:3,reps:'8-12',rest:'120s',rir:'1-2'},{name:'Press Militar con Barra (Sentado)',sets:4,reps:'6-10',rest:'150s',rir:'2'},{name:'Elevaciones Laterales',sets:4,reps:'12-15',rest:'75s',rir:'1'},{name:'Extensiones de Tríceps Polea',sets:3,reps:'12-15',rest:'75s',rir:'Drop set'},{name:'Fondos en Paralelas',sets:3,reps:'Al fallo',rest:'90s',rir:'0'},{name:'Crunch en Cable',sets:3,reps:'15-20',rest:'60s',rir:'1'},{name:'Elev. Piernas Colgado',sets:3,reps:'15-20',rest:'60s',rir:'1'}]},'2':{title:'Día 2: Espalda, Bíceps',description:'Construcción de densidad y fuerza.',exercises:[{name:'Peso Muerto Rumano (RDL)',sets:4,reps:'6-10',rest:'180s',rir:'2'},{name:'Remo con Barra',sets:4,reps:'6-10',rest:'150s',rir:'2'},{name:'Remo con Mancuerna',sets:3,reps:'8-12 c/b',rest:'90s',rir:'1-2'},{name:'Face Pulls',sets:4,reps:'15-20',rest:'75s',rir:'1'},{name:'Curl con Barra Z',sets:3,reps:'8-12',rest:'90s',rir:'1-2'},{name:'Curl Martillo',sets:3,reps:'10-15',rest:'75s',rir:'1'},{name:'Curl de Muñeca',sets:'3 c/u',reps:'15-20',rest:'60s',rir:'1'}]},'3':{title:'Día 3: Piernas y Abdomen',description:'Enfoque en hipertrofia y congestión.',exercises:[{name:'Prensa de Piernas',sets:4,reps:'10-15',rest:'120s',rir:'1-2'},{name:'Hip Thrust',sets:3,reps:'8-12',rest:'120s',rir:'1'},{name:'Curl Femoral',sets:3,reps:'12-15',rest:'90s',rir:'1'},{name:'Extensiones de Cuádriceps',sets:3,reps:'12-18',rest:'75s',rir:'1'},{name:'Abducción de Cadera',sets:3,reps:'15-20',rest:'60s',rir:'1'},{name:'Elevación de Gemelos',sets:4,reps:'15-20',rest:'60s',rir:'1'},{name:'Plancha',sets:3,reps:'45-60s',rest:'60s',rir:'N/A'}]},'4':{title:'Día 4: Espalda, Bíceps, Posterior',description:'Alto volumen para amplitud y detalle.',exercises:[{name:'Jalón al Pecho',sets:4,reps:'8-12',rest:'120s',rir:'1-2'},{name:'Remo en Polea Baja',sets:4,reps:'8-12',rest:'90s',rir:'1-2'},{name:'Pullover con Cable',sets:3,reps:'12-15',rest:'75s',rir:'1'},{name:'Pájaros',sets:3,reps:'15-20',rest:'75s',rir:'1'},{name:'Curl Predicador',sets:3,reps:'8-12',rest:'90s',rir:'1'},{name:'Curl Concentración',sets:3,reps:'10-15 c/b',rest:'60s',rir:'0-1'},{name:'Paseo del Granjero',sets:3,reps:'20-30m',rest:'90s',rir:'N/A'}]},'5':{title:'Día 5: Pecho, Hombros, Tríceps',description:'Énfasis en estrés metabólico.',exercises:[{name:'Press Inclinado con Barra',sets:4,reps:'8-12',rest:'120s',rir:'1-2'},{name:'Press Hombros Mancuernas',sets:4,reps:'8-12',rest:'120s',rir:'1-2'},{name:'Cruces en Polea',sets:3,reps:'12-15',rest:'75s',rir:'Drop set'},{name:'Elev. Laterales Sentado',sets:4,reps:'15-20',rest:'75s',rir:'1'},{name:'Ext. Tríceps sobre Cabeza',sets:3,reps:'10-15',rest:'75s',rir:'1'},{name:'Press Francés',sets:3,reps:'10-12',rest:'90s',rir:'1'},{name:'Rueda Abdominal',sets:3,reps:'8-15',rest:'75s',rir:'Fallo'},{name:'Rotaciones Rusas',sets:3,reps:'20-30',rest:'60s',rir:'1'}]}};

    new Chart(document.getElementById('macroChart').getContext('2d'), { type: 'doughnut', data: { labels: ['Proteína', 'Carbs', 'Grasas'], datasets: [{ data: [macroData.proteina * 4, macroData.carbs * 4, macroData.grasas * 9], backgroundColor: ['#dc2626', '#f5f5f5', '#525252'], borderColor: '#181818', borderWidth: 4, hoverOffset: 8 }] }, options: { responsive: true, maintainAspectRatio: false, cutout: '70%', plugins: { legend: { position: 'bottom', labels: { color: '#e5e5e5' }}, tooltip: { callbacks: { label: c => `${c.label}: ${c.raw.toFixed(0)} kcal (${((c.raw/c.chart.getDatasetMeta(0).total)*100).toFixed(1)}%)` }}}} });

    const navLinks = document.querySelectorAll('#main-nav a, #mobile-nav a');
    const contentSections = document.querySelectorAll('.content-section');
    navLinks.forEach(link => { link.addEventListener('click', e => { e.preventDefault(); const tabId = e.currentTarget.dataset.tab; contentSections.forEach(s => s.classList.remove('active')); document.getElementById(tabId).classList.add('active'); navLinks.forEach(l => l.classList.toggle('active', l.dataset.tab === tabId)); window.scrollTo({ top: 0, behavior: 'smooth' }); }); });
    
    const workoutNav = document.getElementById('workout-nav');
    const workoutContent = document.getElementById('workout-content');
    function renderWorkout(day) { const data = fullWorkoutData[day]; workoutContent.innerHTML = `<h3 class="text-xl font-bold mb-2 text-white">${data.title}</h3><p class="text-gray-400 mb-4">${data.description}</p><div class="overflow-x-auto"><table class="w-full text-sm"><thead><tr class="text-left text-red-500 border-b border-gray-700"><th class="p-2">Ejercicio</th><th class="p-2 text-center">Series</th><th class="p-2 text-center">Reps</th><th class="p-2 text-center">Descanso</th><th class="p-2 text-center">RIR</th></tr></thead><tbody class="divide-y divide-gray-800">${data.exercises.map(ex => `<tr class="text-gray-300"><td class="p-2 font-semibold">${ex.name}</td><td class="p-2 text-center">${ex.sets}</td><td class="p-2 text-center">${ex.reps}</td><td class="p-2 text-center">${ex.rest}</td><td class="p-2 text-center font-bold text-red-500">${ex.rir}</td></tr>`).join('')}</tbody></table></div>`; }
    workoutNav.addEventListener('click', e => { if (e.target.tagName === 'BUTTON') { const day = e.target.dataset.day; workoutNav.querySelectorAll('button').forEach(btn => btn.classList.remove('active')); e.target.classList.add('active'); renderWorkout(day); } });
    renderWorkout('1');

    // Progress Tracking
    let measurements = JSON.parse(localStorage.getItem('fitnessMeasurementsDR')) || [];
    let notes = JSON.parse(localStorage.getItem('fitnessNotesDR')) || [];
    let lifts = JSON.parse(localStorage.getItem('fitnessLiftsDR')) || [];
    
    const measureForm = document.getElementById('measurement-form');
    const measureHistoryEl = document.getElementById('measurements-history');
    const notesForm = document.getElementById('notes-form');
    const notesHistoryEl = document.getElementById('notes-history');
    const liftForm = document.getElementById('lift-form');
    const liftHistoryEl = document.getElementById('lifts-history');
    const liftExerciseSelect = document.getElementById('lift-exercise');
    const liftFilterSelect = document.getElementById('lift-filter');

    const allExercises = [...new Set(Object.values(fullWorkoutData).flatMap(day => day.exercises.map(ex => ex.name)))].sort();
    function populateExerciseSelects() {
        liftFilterSelect.innerHTML = '<option value="all">Todos los Ejercicios</option>';
        liftExerciseSelect.innerHTML = '<option value="">Selecciona Ejercicio</option>';
        allExercises.forEach(ex => {
            liftExerciseSelect.innerHTML += `<option value="${ex}">${ex}</option>`;
            liftFilterSelect.innerHTML += `<option value="${ex}">${ex}</option>`;
        });
    }

    function renderMeasurements() { measurements.sort((a,b)=>new Date(b.date)-new Date(a.date)); measureHistoryEl.innerHTML = measurements.map(m=>`<tr><td class="p-2">${new Date(m.date).toLocaleDateString('es-CO',{timeZone:'UTC'})}</td><td class="p-2">${m.weight} kg</td><td class="p-2">${m.waist} cm</td><td class="p-2 text-right"><button class="btn-danger" data-id="${m.id}">X</button></td></tr>`).join(''); }
    function renderNotes() { notes.sort((a,b)=>b.id-a.id); notesHistoryEl.innerHTML = notes.map(n=>`<div class="bg-black/20 p-3 rounded-lg"><p class="text-sm text-gray-300 whitespace-pre-wrap">${n.text}</p><div class="text-xs text-gray-500 mt-2 flex justify-between items-center">${n.date} <button class="btn-danger" data-id="${n.id}">X</button></div></div>`).join(''); }
    function renderLifts() {
        lifts.sort((a, b) => new Date(b.date) - new Date(a.date));
        const filter = liftFilterSelect.value;
        const filteredLifts = filter === 'all' ? lifts : lifts.filter(l => l.exercise === filter);
        liftHistoryEl.innerHTML = filteredLifts.map(l => `<tr><td class="p-2">${new Date(l.date).toLocaleDateString('es-CO', {timeZone:'UTC'})}</td><td class="p-2 font-semibold">${l.exercise}</td><td class="p-2">${l.weight} kg</td><td class="p-2">${l.reps}</td><td class="p-2 text-right"><button class="btn-danger" data-id="${l.id}">X</button></td></tr>`).join('');
    }

    measureForm.addEventListener('submit', e=>{ e.preventDefault(); if(!e.target.elements['measure-date'].value) {alert('Selecciona una fecha.'); return;} measurements.push({id:Date.now(),date:e.target.elements['measure-date'].value,weight:e.target.elements['measure-weight'].value||'N/A',waist:e.target.elements['measure-waist'].value||'N/A'}); localStorage.setItem('fitnessMeasurementsDR', JSON.stringify(measurements)); renderMeasurements(); e.target.reset(); e.target.elements['measure-date'].valueAsDate = new Date(); });
    notesForm.addEventListener('submit', e=>{ e.preventDefault(); const text=e.target.elements['note-text'].value.trim(); if(!text) return; notes.push({id:Date.now(),date:new Date().toLocaleString('es-CO'),text}); localStorage.setItem('fitnessNotesDR',JSON.stringify(notes)); renderNotes(); e.target.reset(); });
    liftForm.addEventListener('submit', e=>{ e.preventDefault(); const exercise = e.target.elements['lift-exercise'].value; const weight = e.target.elements['lift-weight'].value; const reps = e.target.elements['lift-reps'].value; if(!exercise || !weight || !reps) { alert('Completa todos los campos del levantamiento.'); return;} lifts.push({id:Date.now(),date:new Date().toISOString().split('T')[0],exercise,weight,reps}); localStorage.setItem('fitnessLiftsDR',JSON.stringify(lifts)); renderLifts(); e.target.reset(); });
    
    measureHistoryEl.addEventListener('click', e => { if (e.target.classList.contains('btn-danger')) { measurements = measurements.filter(m => m.id !== Number(e.target.dataset.id)); localStorage.setItem('fitnessMeasurementsDR', JSON.stringify(measurements)); renderMeasurements(); } });
    notesHistoryEl.addEventListener('click', e => { if (e.target.classList.contains('btn-danger')) { notes = notes.filter(n => n.id !== Number(e.target.dataset.id)); localStorage.setItem('fitnessNotesDR', JSON.stringify(notes)); renderNotes(); } });
    liftHistoryEl.addEventListener('click', e => { if (e.target.classList.contains('btn-danger')) { lifts = lifts.filter(l => l.id !== Number(e.target.dataset.id)); localStorage.setItem('fitnessLiftsDR', JSON.stringify(lifts)); renderLifts(); } });
    liftFilterSelect.addEventListener('change', renderLifts);

    // Calculators
    document.getElementById('1rm-form').addEventListener('submit', e => { e.preventDefault(); const w = parseFloat(e.target.elements['1rm-weight'].value); const r = parseInt(e.target.elements['1rm-reps'].value); if(w > 0 && r > 0){ const rm = w * (1 + (r/30)); document.getElementById('1rm-result').textContent = `1RM Estimado: ${rm.toFixed(1)} kg`; } else { document.getElementById('1rm-result').textContent = 'Datos inválidos'; } });
    document.getElementById('rir-form').addEventListener('submit', e => { e.preventDefault(); const rm1 = parseFloat(e.target.elements['rir-1rm'].value); const reps = parseInt(e.target.elements['rir-reps'].value); const rir = parseInt(e.target.elements['rir-rir'].value); if(rm1 > 0 && reps > 0 && rir >= 0){ const totalReps = reps + rir; const intensity = 1 / (1 + (totalReps/30)); const weight = rm1 * intensity; document.getElementById('rir-result').textContent = `Peso Sugerido: ${weight.toFixed(1)} kg`; } else { document.getElementById('rir-result').textContent = 'Datos inválidos'; } });

    document.getElementById('measure-date').valueAsDate = new Date();
    populateExerciseSelects();
    renderMeasurements();
    renderNotes();
    renderLifts();
});
</script>
</body>
</html>
